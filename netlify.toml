# Netlify Configuration File
# Documentación: https://docs.netlify.com/configure-builds/file-based-configuration/

[build]
  # Comando para build (ajustar según tu proyecto)
  command = "npm run build"
  # Directorio de publicación (ajustar según tu proyecto Astro)
  publish = "dist"
  # Directorio de funciones
  functions = "netlify/functions"

# Configuración de Netlify Forms
# Las formas se detectan automáticamente durante el build
# No se requiere configuración adicional aquí

# Variables de entorno (configurar en Netlify Dashboard)
# - TURSO_DATABASE_URL: URL de tu base de datos Turso
# - TURSO_AUTH_TOKEN: Token de autenticación de Turso

# Configuración de notificaciones de formularios (OPCIONAL)
# Si quieres recibir notificaciones por email cuando alguien envía el formulario:
# 1. Ve a Netlify Dashboard > Site Settings > Forms > Form notifications
# 2. Agrega tu email en "Email notifications"
# 3. Opcionalmente, configura webhooks para integraciones

# Configuración de Netlify Functions
[functions]
  # Directorio de las funciones
  directory = "netlify/functions"
  # Node version
  node_bundler = "esbuild"

# Redirects y rewrites
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200

# Headers de seguridad
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
    Permissions-Policy = "camera=(), microphone=(), geolocation=()"

# Headers para formularios
[[headers]]
  for = "/contact-netlify"
  [headers.values]
    Cache-Control = "no-cache, no-store, must-revalidate"

# Plugin de Netlify Forms (si usas plugins)
# [[plugins]]
#   package = "@netlify/plugin-forms"
