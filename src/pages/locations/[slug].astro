---
export const prerender = true;
import type { GetStaticPaths } from "astro";
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Button from "../../components/Button.astro";
import Whyus from "../../components/whyus.astro";
import Faq from "../../components/Faq.astro";
import { createLocalBusinessSchema } from "../../utils/schema";

export async function getStaticPaths() {
  const locations = await getCollection("locations", ({ data }) => !data.draft);

  return locations.map((location) => ({
    params: { slug: location.slug },
    props: { location },
  }));
}

const { location } = Astro.props;
const { data } = location;
const {
  title,
  description,
  city,
  state,
  stateCode,
  img,
  imageAlt,
  population,
  timezone,
  keywords
} = data;

// SEO optimization
const seoTitle = `${title} | Codebrand`;
const seoDescription = description;
const seoKeywords = [
  `web development ${city}`,
  `web development company ${city}`,
  `custom web development ${city}`,
  `affordable web developers ${city}`,
  `web development services ${city} ${state}`,
  `web development agency ${city}`,
  ...(keywords || [])
].join(", ");

// Ensure absolute URL for images
const baseUrl = "https://codebrand.us";
const absoluteImage = img ? (img.startsWith('http') ? img : `${baseUrl}${img}`) : `${baseUrl}/photos/webservice.webp`;

// Structured Data for Local Business Service
const structuredData = {
  "@context": "https://schema.org",
  "@type": "Service",
  "serviceType": "Web Development",
  "provider": {
    "@type": "Organization",
    "name": "Codebrand",
    "url": "https://codebrand.us",
    "logo": "https://codebrand.us/iconcodebrand.svg",
    "address": {
      "@type": "PostalAddress",
      "addressCountry": "HN",
      "addressRegion": "Cortés"
    },
    "contactPoint": {
      "@type": "ContactPoint",
      "telephone": "+504-3272-2973",
      "contactType": "Sales",
      "email": "info@codebrand.es",
      "availableLanguage": ["English", "Spanish"]
    }
  },
  "areaServed": {
    "@type": "City",
    "name": city,
    "containedIn": {
      "@type": "State",
      "name": state
    }
  },
  "description": description,
  "url": `${baseUrl}/locations/${location.slug}`,
  "image": absoluteImage
};

// LocalBusiness Schema for enhanced local SEO
const localBusinessSchema = createLocalBusinessSchema(city, state, stateCode, description);
---

<Layout
  title={seoTitle}
  description={seoDescription}
  keywords={seoKeywords}
  image={absoluteImage}
>
  <!-- Service Structured Data -->
  <script type="application/ld+json" is:inline set:html={JSON.stringify(structuredData)} />

  <!-- LocalBusiness Schema for enhanced local SEO -->
  <script type="application/ld+json" is:inline set:html={JSON.stringify(localBusinessSchema)} />

  <!-- Hero Section -->
  <section class="relative bg-white py-16 sm:py-24 lg:py-32 font-poppins overflow-hidden">
    <div class="absolute inset-0 opacity-5">
      <div class="absolute inset-0" style="background-image: url('data:image/svg+xml,%3Csvg width=%2260%22 height=%2260%22 viewBox=%220%200%2060%2060%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cg fill=%22none%22 fill-rule=%22evenodd%22%3E%3Cg fill=%22%23000000%22 fill-opacity=%221%22%3E%3Cpath d=%22M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E');"></div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">
      <div class="text-center max-w-4xl mx-auto">
        <span class="inline-flex items-center gap-2 px-4 py-2 bg-cyan-100 text-cyan-800 text-sm font-semibold rounded-full mb-6">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"></path>
          </svg>
          {city}, {stateCode}
        </span>
        <h1 class="text-4xl sm:text-5xl lg:text-7xl font-bold text-cyan-900 mb-6 leading-tight">
          Professional Web Development in <span class="text-orange-500">{city}, {state}</span>
        </h1>
        <p class="text-xl sm:text-2xl text-gray-700 mb-8 leading-relaxed">
          {description}
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="/contact" class="inline-flex items-center justify-center gap-2 px-8 py-4 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200">
            Get Free Quote
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
            </svg>
          </a>
          <a href="#why-codebrand" class="inline-flex items-center justify-center gap-2 px-8 py-4 bg-white hover:bg-gray-50 text-cyan-900 rounded-xl font-bold text-lg shadow-lg border-2 border-cyan-200 transition-all duration-200">
            Why Choose Us
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Why Codebrand for [City] Section -->
  <section class="py-16 lg:py-24 bg-white font-poppins" id="why-codebrand">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-cyan-900 mb-6">
          Why {city} Businesses Choose Codebrand
        </h2>
        <p class="text-xl text-gray-700 max-w-3xl mx-auto">
          We're a Honduras-based web development agency serving {city} businesses with premium quality at 60% less than US rates. Same timezone, bilingual team, export-quality work.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <!-- Benefit 1: Cost Savings -->
        <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow">
          <div class="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center mb-4">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-cyan-900 mb-3">60% Cost Savings</h3>
          <p class="text-gray-700">
            Get the same quality as {city} agencies at a fraction of the cost. A $15,000 project costs $6,000 with us—without compromising quality.
          </p>
        </div>

        <!-- Benefit 2: Same Timezone -->
        <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow">
          <div class="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center mb-4">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-cyan-900 mb-3">Same Timezone</h3>
          <p class="text-gray-700">
            Honduras operates on CST, similar to {city}. Real-time collaboration, instant communication, no waiting overnight for responses.
          </p>
        </div>

        <!-- Benefit 3: Bilingual Team -->
        <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow">
          <div class="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center mb-4">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-cyan-900 mb-3">Fluent English</h3>
          <p class="text-gray-700">
            Our entire team speaks fluent English. Clear communication, no language barriers, seamless project management.
          </p>
        </div>

        <!-- Benefit 4: Modern Tech Stack -->
        <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow">
          <div class="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center mb-4">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-cyan-900 mb-3">Latest Technologies</h3>
          <p class="text-gray-700">
            React, Next.js, Astro, Node.js, TypeScript—we use the same modern stack as top {city} development shops.
          </p>
        </div>

        <!-- Benefit 5: Proven Track Record -->
        <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow">
          <div class="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center mb-4">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-cyan-900 mb-3">500+ Projects Delivered</h3>
          <p class="text-gray-700">
            We've successfully completed projects for US businesses across industries. Certified team (Udemy, Platzi, Adobe).
          </p>
        </div>

        <!-- Benefit 6: Full Ownership -->
        <div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-shadow">
          <div class="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center mb-4">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
          </div>
          <h3 class="text-xl font-bold text-cyan-900 mb-3">You Own Everything</h3>
          <p class="text-gray-700">
            Complete source code ownership, no vendor lock-in. Your website, your code, your freedom to modify or move it.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Our Services -->
  <section class="py-16 lg:py-24 bg-gray-50 font-poppins">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-cyan-900 mb-6">
          Web Development Services for {city} Businesses
        </h2>
        <p class="text-xl text-gray-700 max-w-3xl mx-auto">
          From startups to established companies, we provide comprehensive web development solutions tailored to {city}'s business landscape.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        <div class="bg-white p-8 rounded-2xl shadow-lg">
          <h3 class="text-2xl font-bold text-cyan-900 mb-4">Custom Web Development</h3>
          <p class="text-gray-700 mb-6">
            Tailored web applications built with React, Next.js, or Astro. Scalable, fast, and designed for your specific business needs.
          </p>
          <a href="/web-development" class="text-orange-600 hover:text-orange-700 font-semibold inline-flex items-center gap-2">
            Learn More
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>

        <div class="bg-white p-8 rounded-2xl shadow-lg">
          <h3 class="text-2xl font-bold text-cyan-900 mb-4">E-commerce Development</h3>
          <p class="text-gray-700 mb-6">
            Full-featured online stores with Shopify, WooCommerce, or custom platforms. Payment gateways, inventory management, and more.
          </p>
          <a href="/e-commerce" class="text-orange-600 hover:text-orange-700 font-semibold inline-flex items-center gap-2">
            Learn More
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>

        <div class="bg-white p-8 rounded-2xl shadow-lg">
          <h3 class="text-2xl font-bold text-cyan-900 mb-4">Web Design & UI/UX</h3>
          <p class="text-gray-700 mb-6">
            Beautiful, conversion-focused designs that represent your {city} brand professionally and drive real business results.
          </p>
          <a href="/web-design" class="text-orange-600 hover:text-orange-700 font-semibold inline-flex items-center gap-2">
            Learn More
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Why Us Component -->
  <Whyus />

  <!-- CTA Section -->
  <section class="py-16 lg:py-24 bg-cyan-900 font-poppins">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-white mb-6">
        Ready to Start Your {city} Web Development Project?
      </h2>
      <p class="text-xl text-cyan-100 mb-8">
        Get a free consultation and detailed project quote. No commitment required.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/contact" class="inline-flex items-center justify-center gap-2 px-8 py-4 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200">
          Get Free Quote
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
          </svg>
        </a>
        <a href="/projects" class="inline-flex items-center justify-center gap-2 px-8 py-4 bg-white hover:bg-gray-100 text-cyan-900 rounded-xl font-bold text-lg shadow-lg transition-all duration-200">
          View Our Work
        </a>
      </div>
    </div>
  </section>

  <!-- FAQ -->
  <Faq />
</Layout>
