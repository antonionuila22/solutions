---
// WhatsApp Floating Widget
const phoneNumber = "50432722973";
const defaultMessage = "Hi! I'm interested in your web development services. Can we schedule a call?";
const encodedMessage = encodeURIComponent(defaultMessage);
const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
---

<div id="whatsapp-widget" class="whatsapp-widget">
  <!-- Main Button -->
  <a
    href={whatsappUrl}
    target="_blank"
    rel="noopener noreferrer"
    class="whatsapp-button"
    aria-label="Chat on WhatsApp"
  >
    <svg viewBox="0 0 32 32" class="whatsapp-icon" fill="currentColor">
      <path d="M16.004 0h-.008C7.174 0 0 7.176 0 16c0 3.5 1.13 6.742 3.05 9.378L1.054 31.29l6.166-1.963C9.72 30.97 12.742 32 16.004 32 24.826 32 32 24.822 32 16S24.826 0 16.004 0zm9.294 22.6c-.39 1.092-1.932 1.998-3.156 2.264-.838.178-1.932.32-5.616-1.208-4.714-1.952-7.752-6.744-7.986-7.058-.226-.314-1.886-2.51-1.886-4.788s1.194-3.398 1.618-3.864c.39-.428.924-.642 1.436-.642.174 0 .33.016.472.03.424.018.636.042.916.708.35.832 1.2 2.924 1.304 3.138.104.214.208.502.062.788-.138.294-.258.476-.476.73-.218.254-.426.448-.644.72-.194.238-.412.492-.176.916.236.424 1.052 1.734 2.26 2.81 1.552 1.382 2.86 1.81 3.264 2.012.314.156.69.13.934-.13.308-.332.69-.882 1.078-1.424.276-.386.624-.434.97-.294.35.132 2.222 1.048 2.602 1.238.38.192.632.286.726.448.094.162.094.924-.296 2.016z"/>
    </svg>
    <span class="whatsapp-tooltip">Chat with us!</span>
  </a>

  <!-- Pulse Animation -->
  <div class="whatsapp-pulse"></div>
</div>

<style>
  .whatsapp-widget {
    position: fixed;
    bottom: 24px;
    right: 24px;
    z-index: 9999;
  }

  .whatsapp-button {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
    border-radius: 50%;
    box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
    transition: all 0.3s ease;
    position: relative;
    z-index: 2;
  }

  .whatsapp-button:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(37, 211, 102, 0.5);
  }

  .whatsapp-icon {
    width: 32px;
    height: 32px;
    color: white;
  }

  .whatsapp-tooltip {
    position: absolute;
    right: 70px;
    background: white;
    color: #333;
    padding: 8px 16px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    white-space: nowrap;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    pointer-events: none;
  }

  .whatsapp-tooltip::after {
    content: '';
    position: absolute;
    right: -6px;
    top: 50%;
    transform: translateY(-50%);
    border-width: 6px;
    border-style: solid;
    border-color: transparent transparent transparent white;
  }

  .whatsapp-button:hover .whatsapp-tooltip {
    opacity: 1;
    visibility: visible;
    right: 75px;
  }

  .whatsapp-pulse {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60px;
    height: 60px;
    background: #25D366;
    border-radius: 50%;
    z-index: 1;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0% {
      transform: translate(-50%, -50%) scale(1);
      opacity: 0.5;
    }
    100% {
      transform: translate(-50%, -50%) scale(1.5);
      opacity: 0;
    }
  }

  /* Mobile adjustments */
  @media (max-width: 640px) {
    .whatsapp-widget {
      bottom: 16px;
      right: 16px;
    }

    .whatsapp-button {
      width: 56px;
      height: 56px;
    }

    .whatsapp-pulse {
      width: 56px;
      height: 56px;
    }

    .whatsapp-icon {
      width: 28px;
      height: 28px;
    }

    .whatsapp-tooltip {
      display: none;
    }
  }
</style>
